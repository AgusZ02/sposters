(()=>{"use strict";var e,t,n,r,o={74:(e,t,n)=>{async function r(){let e=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials&client_id=61148ef8cfdb424d99ffaf36ef202348&client_secret=825770f6cef34a758c37d26019a8c728"});return(await e.json()).access_token}async function o(e,t,n){let r=await fetch(`https://api.spotify.com/v1/search?q=${e}&type=${t}`,{headers:{Authorization:`Bearer ${n}`}});return(await r.json())[`${t}s`].items}n.d(t,{P:()=>o,V:()=>r})},155:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var r=n(74),o=n(324);let e=await(0,r.V)();(0,o.WP)(e),t()}catch(e){t(e)}}),1)},324:(e,t,n)=>{async function r(e){!function(e,t){let n=document.getElementById("strip-colors").value,r=document.getElementById("query-type").value,a=document.getElementById("rgb-color"),c=document.getElementById("query-image"),d=document.getElementById("code-image");null==t&&(t=a.value);let l=c.width;l<256&&(l=256);let i=`https://scannables.scdn.co/uri/plain/png/${t.replace("#","")}/${n}/${l}/spotify:${r}:${e.id}`;o(i,d).then((()=>i)).catch((()=>{alert("Error loading image")}))}(e,u),m(await a(e))}function o(e,t){return new Promise(((n,r)=>{fetch(e).then((e=>e.blob())).then((async e=>{t.src=URL.createObjectURL(e),t.onload=n,t.onerror=r})).catch((e=>()=>{r(e)}))}))}function a(e,t=1,n=document.getElementById("query-image")){let r,a=e;return"track"===document.getElementById("query-type").value&&(a=e.album),0==a.images.length?(alert("No images found for this query"),r="../img/cover.png"):r=a.images[t].url,o(r,n).then((()=>r)).catch((()=>{alert("Error loading image")}))}n.d(t,{WP:()=>s,hA:()=>u,Ah:()=>m});var c=n(74);let d={},l=0;async function i(e){let t=document.getElementById("query-text").value,n=t.replace(" ","+"),o=document.getElementById("query-type").value;0!=t.length?(d=await(0,c.P)(n,o,e),l=0,0!=d.length?(d.length>1&&(document.getElementById("next-btn").disabled=!1),"505px"!==document.getElementById("container2-controles").style.height&&(document.getElementById("prev-btn").disabled=!0,document.getElementById("download-btn").disabled=!1,document.getElementById("container2-controles").style.height="505px",document.getElementById("caja-colores").style.height="284px",document.getElementById("caja-colores").style.padding="0.75rem",document.getElementById("caja-colores").classList.remove("hidden")),r(d[l])):alert("No results found")):alert("Please enter a search query")}let u="#1db954";function m(e){let t=1;colorjs.prominent(e,{amount:6,sample:5,format:"hex",group:40}).then((e=>{Array.isArray(e)||(e=new Array(6).fill(e)),e.forEach((e=>{t>6||(document.getElementById("color"+t).style.backgroundColor=e,t++)}))}))}function s(e){let t=document.getElementById("query-text");t.addEventListener("keypress",(n=>{13===(n.which||n.keyCode)&&""!==t.value&&i(e)}));let n=document.getElementById("rgb-color");n.addEventListener("change",(()=>{d.length>0&&(u=n.value,r(d[l]))})),document.getElementById("search-btn").addEventListener("click",(()=>{i(e)}));let c=document.getElementById("next-btn");c.addEventListener("click",(()=>{!async function(){l++,l===d.length-1&&(document.getElementById("next-btn").disabled=!0),document.getElementById("prev-btn").disabled=!1,r(d[l])}()})),c.disabled=!0;let m=document.getElementById("prev-btn");m.addEventListener("click",(()=>{!async function(){l--,0===l?document.getElementById("prev-btn").disabled=!0:document.getElementById("next-btn").disabled=!1,r(d[l])}()})),m.disabled=!0;let s=document.getElementById("download-btn");s.addEventListener("click",(()=>{(async function(){let e=1,t=new Image,n=new Image,r=document.getElementById("strip-colors").value,c=document.getElementById("query-type").value;if(await a(d[l],0,n),await o(`https://scannables.scdn.co/uri/plain/png/${u.replace("#","")}/${r}/${n.width}/spotify:${c}:${d[l].id}`,t),t.height>0){let r=document.getElementById("output"),o=r.getContext("2d");r.width=n.width,r.height=n.height+t.height,o.drawImage(n,0,0),o.drawImage(t,0,n.height),e=0}return e})().then((e=>{0===e&&function(e){let t=output.toDataURL(),n=document.createElement("a");n.download="Sposter_"+e+".png",n.href=t,n.click()}(d[l].name.replace('/([\\/:*?"<>|.]+)/g',"_"))}))})),s.disabled=!0,document.getElementById("strip-colors").addEventListener("change",(()=>{d.length>0&&r(d[l])})),document.getElementById("color-input-icon").addEventListener("click",(()=>{n.click()}));for(let e=1;e<7;e++){let t=document.getElementById("color"+e);t.addEventListener("click",(()=>{var e;d.length>0&&(e=t.style.backgroundColor,u="#"+e.match(/\d+/g).map((e=>{const t=parseInt(e).toString(16);return 1===t.length?"0"+t:t})).join(""),n.value=u,r(d[l]))}))}}}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return o[e](n,n.exports,c),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(o,a,c)=>{var d;c&&((d=[]).d=-1);var l,i,u,m=new Set,s=o.exports,y=new Promise(((e,t)=>{u=t,i=e}));y[t]=s,y[e]=e=>(d&&e(d),m.forEach(e),y.catch((e=>{}))),o.exports=y,a((o=>{var a;l=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var a=[];a.d=0,o.then((e=>{c[t]=e,r(a)}),(e=>{c[n]=e,r(a)}));var c={};return c[e]=e=>e(a),c}}var d={};return d[e]=e=>{},d[t]=o,d})))(o);var c=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),i=new Promise((t=>{(a=()=>t(c)).r=0;var n=e=>e!==d&&!m.has(e)&&(m.add(e),e&&!e.d&&(a.r++,e.push(a)));l.map((t=>t[e](n)))}));return a.r?i:c()}),(e=>(e?u(y[n]=e):i(s),r(d)))),d&&d.d<0&&(d.d=0)},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(155)})();